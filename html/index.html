<!Doctype html>
<html lang="en">
    <head>
        <!-- Required meta tags -->
        <meta charset="utf-8">
            <meta http-equiv="X-UA-Compatible" content="IE=edge">
                <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
                    
                    <!-- Bootstrap CSS -->
                    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
                        
                        <title>Index</title>
                        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"
                            integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
                            </head>
    
    
    <body>
        
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
        <script src="/socket.io/socket.io.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.17.1/moment.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.17.1/locale/it.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.5.0/Chart.min.js"></script>
        
        
        
        
        
        <h1 align="center">Grafico Valori</h1>
        <ul class="nav justify-content-center">
            <li class="nav-item">
                <a class="nav-link active" href="index.html">Index</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="report.html">Report</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="admin.html">Admin</a>
            </li>
        </ul>
          <div class="row">
        <div class="col-md-12">
          <canvas id="post_1"></canvas>
      	</div>
      </div>

      <div class="row">
        <div class="col-md-12">
          <canvas id="post_2"></canvas>
      	</div>
      </div>

      <div class="row">
        <div class="col-md-12">
          <canvas id="post_3"></canvas>
      	</div>
      </div>
          
        <script>

  var socket = io();

  var temp1  = new Array(); 
  var temp2  = new Array(); 
  var temp3  = new Array(); 
  var tempS  = new Array();

  var humid1  = new Array(); 
  var humid2  = new Array(); 
  var humid3  = new Array(); 

  var hygro1  = new Array(); 
  var hygro2  = new Array(); 
  var hygro3  = new Array(); 

//  temp1  = [ [], [] ]; 
  temp1  = [ [], []];
  temp2  = [ [], []]; 
  temp3  = [ [], []]; 
  tempS  = [ [], []];
  pTemp1  = [];


  humid1  = [ [], []];
  humid2  = [ [], []]; 
  humid3  = [ [], []]; 


  hygro1  = [ [], []];
  hygro2  = [ [], []]; 
  hygro3  = [ [], []]; 

 // console.log(temp2);

 
  socket.on('temp', function(data){
	
	data.forEach(function (record){

	var dataAcq = new Date(record.data);
	//per record intendiamo ogni elemento del vettore 
	if(record.postazione==1) {       
//		console.log("il valore arriva così:");
//		console.log(moment(record.t));
		var nuovoDato = { 
//		    x: (moment(dataAcq).format("DD/MM/YY HH:mm")),
		    x: dataAcq,
		    y: Number(record.temperature),
		    r:2
		 };

		pTemp1.push(nuovoDato);
//		console.log(record.temperature);
		temp1[0].push(moment(dataAcq).format("DD/MM/YY HH:mm"));
		temp1[1].push(Number(record.temperature));
	}else if(record.postazione==2){       
//		console.log(moment(record.t).format("DD/MM/YY HH:mm"));
//		console.log(record.temperature);
		temp2[0].push(moment(dataAcq).format("DD/MM/YY HH:mm"));
		temp2[1].push(Number(record.temperature));
/*		var nuovoDato = { 
		    x: dataAcq,
		    y: Number(record.temperature)
		 };

		temp2.push(nuovoDato);
*/
	}else if(record.postazione==3){
//		console.log(moment(record.t).format("DD/MM/YY HH:mm"));
//		console.log(record.temperature);
		temp3[0].push(moment(dataAcq).format("DD/MM/YY HH:mm"));
		temp3[1].push(parseInt(record.temperature));

/*		var nuovoDato = { 
		    x: dataAcq,
		    y: parseInt(record.temperature)
		 };

		temp3.push(nuovoDato);
*/

	}else{       
//		console.log(moment(record.t).format("DD/MM/YY HH:mm"));
//		console.log(record.temperature);
		tempS[0].push(dataAcq);
		tempS[1].push(Number(record.temperature));

	}
	});	
//	console.log("la prima curva è:" + temp1);	
//	console.log("la seconda curva è:" + temp2);	
//	console.log("la terza curva è:" + temp3);	
//	console.log("il vettore bobble è: ");
//	console.log(pTemp1);	


});

 socket.on('humid', function(data){
	
	data.forEach(function (record){
		
	console.log(record);

	var dataAcq = new Date(record.data);
	//per record intendiamo ogni elemento del vettore 
	if(record.postazione==1) {       

		humid1[0].push(moment(dataAcq).format("DD/MM/YY HH:mm"));
		humid1[1].push(Number(record.humidity));
	}else if(record.postazione==2){       
//		console.log(moment(record.t).format("DD/MM/YY HH:mm"));
//		console.log(record.temperature);
		humid2[0].push(dataAcq);
		humid2[1].push(Number(record.humidity));

	}else if(record.postazione==3){
//		console.log(moment(record.t).format("DD/MM/YY HH:mm"));
//		console.log(record.temperature);
		humid3[0].push(dataAcq);
		humid3[1].push(parseInt(record.humidity));
	}

	});	
	console.log("humid 1 è:" + humid1);	
	console.log("humid 2 è:" + humid2);	
	console.log("humid 3 è:" + humid3);	

});


 socket.on('hygro', function(data){
	
	data.forEach(function (record){

	var dataAcq = new Date(record.data);
	//per record intendiamo ogni elemento del vettore 
	if(record.postazione==1) {       

		hygro1[0].push(moment(dataAcq).format("DD/MM/YY HH:mm"));
		hygro1[1].push(Number(record.hygroThermal));
	}else if(record.postazione==2){       
//		console.log(moment(record.t).format("DD/MM/YY HH:mm"));
//		console.log(record.temperature);
		hygro2[0].push(dataAcq);
		hygro2[1].push(Number(record.hygroThermal));

	}else if(record.postazione==3){
//		console.log(moment(record.t).format("DD/MM/YY HH:mm"));
//		console.log(record.temperature);
		hygro3[0].push(dataAcq);
		hygro3[1].push(parseInt(record.hygroThermal));
	}

	});	
//	console.log("hygro 1 è:" + temp1);	
//	console.log("hygro 2 è:" + temp2);	
//	console.log("hygro 3 è:" + temp3);	

});
</script>
                                  
                                  
            </script>
        <!-- Optional JavaScript -->
        <!-- jQuery first, then Popper.js, then Bootstrap JS -->
        <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
    </body>
</html>
